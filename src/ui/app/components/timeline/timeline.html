<div>
    <h1>Timeline</h1>
    <p>Displaying requests in the last {{ thresholdInSeconds }} seconds</p>
    <transition name="switch-animation" mode="out-in">
        <div v-if="visibleRequests.length" key="timeline">
            <table class="table table-sm">
                <thead>
                    <tr>
                        <th scope="col" style="border-top: 0; width: 50px;">#</th>
                        <th scope="col" style="border-top: 0">URL</th>
                        <th scope="col" style="border-top: 0; width: 120px;">Status Code</th>
                        <th scope="col" style="border-top: 0; width: 50%">Timeline</th>
                    </tr>
                </thead>
                <tbody is="transition-group" name="table-animation">
                    <tr v-for="request in visibleRequests" :key="request.id" class="table-animation-item">
                        <th scope="row">{{ request.id }}</th>
                        <td class="ellipsis">
                            <span :title="request.url">{{ request.url }}</span>
                        </td>
                        <td :class="{ 'text-danger': request.response && request.response.statusCode >= 400 }">
                            {{ request.response && request.response.statusCode || "-" }}
                        </td>
                        <td style="padding: 0; background: #e9ecef; height: 33px;">
                            <request-timeline
                                :request="request"
                                :min="min"
                                :max="max"></request-timeline>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <p v-else-if="!allRequests.length" class="alert alert-info" key="no-requests">
            No requests to display
        </p>
        <p v-else class="alert alert-info" key="no-visible-requests">
            No requests match the filter
        </p>
    </transition>
</div>
